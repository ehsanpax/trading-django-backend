#!/usr/bin/env python3
# Pre-commit guard to prevent accidental removal of critical views.

import os
import sys
from pathlib import Path

repo_root = Path(__file__).resolve().parents[1]
sys.path.insert(0, str(repo_root))

script = repo_root / "scripts" / "check_critical_symbols.py"
if not script.exists():
    print("[Guard] check_critical_symbols.py not found; skipping.")
    raise SystemExit(0)

# Use the same interpreter
exit_code = os.spawnv(os.P_WAIT, sys.executable, [sys.executable, str(script)])
raise SystemExit(exit_code)
